# 广州高中教务系统数据库表结构（基本表形式，对应调整后创建顺序）
## 1.  账号密码表（account）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| person_account | VARCHAR(20) | 主键 | 系统登录账号，唯一标识一个登录账号 |
| password | VARCHAR(20) | 非空 | 登录密码 |
| person_id | VARCHAR(20) | 非空 | 对应用户ID，关联学生学号或教职工工号 |

## 2.  角色表（role）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| role_id | VARCHAR(20) | 主键 | 角色编号，唯一标识系统角色 |
| role_name | ENUM('学生', '班主任', '科任老师', '教务主任', '校长') | 非空 | 角色名称，预设系统核心角色 |
| role_desc | VARCHAR(200) | 可选 | 角色描述，说明各角色核心权限范围 |

## 3.  课程表（course）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| course_id | VARCHAR(20) | 主键 | 课程编号，唯一标识一门课程 |
| course_name | VARCHAR(50) | 非空 | 课程名称（如语文、数学、物理） |
| course_type | ENUM('主科', '选科') | 非空 | 课程类型，区分主科（语数外）与选科 |
| is_score_convert | ENUM('是', '否') | 非空 | 是否参与市统考赋分，仅政史地生为“是” |

## 4.  教职工表（staff）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| staff_id | VARCHAR(20) | 主键 | 教职工工号，唯一标识一名教职工 |
| staff_name | VARCHAR(50) | 非空 | 教职工姓名 |
| gender | ENUM('男', '女') | 非空 | 教职工性别 |
| position | VARCHAR(50) | 非空 | 教职工职称（如一级教师、高级教师） |
| is_leave | ENUM('是', '否') | 非空，默认“否” | 教职工离职状态，默认在职 |
| password | VARCHAR(100) | 非空 | 加密存储的账号密码，用于系统登录 |
| create_time | DATETIME | 非空，默认当前时间戳 | 教职工信息录入系统时间 |

## 5.  班级表（class）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| class_id | VARCHAR(20) | 主键 | 班级编号，唯一标识一个班级 |
| class_name | VARCHAR(50) | 非空 | 班级名称（如高一（1）班、高二物理政治地理班） |
| grade | INT | 非空 | 年级，1（高一）、2（高二）、3（高三） |
| subject_combination | INT | 检查约束（BETWEEN 0 AND 11） | 选科组合编码，0-11对应“物理/历史+政史地生四选二”的所有合法组合 |
| head_teacher_id | VARCHAR(20) | 外键（关联staff.staff_id） | 班主任工号，关联教职工表，确保班主任合法性 |
| current_student_num | INT | 非空，默认0 | 当前班级在册学生人数 |

## 6.  学生表（student）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| student_id | VARCHAR(20) | 主键 | 学号，唯一标识一名学生 |
| student_name | VARCHAR(50) | 非空 | 学生姓名 |
| gender | ENUM('男', '女') | 非空 | 学生性别 |
| grade | INT | 非空 | 学生当前年级，1（高一）、2（高二）、3（高三） |
| class_id | VARCHAR(20) | 外键（关联class.class_id）、非空 | 学生当前所在班级编号 |
| high1_class_id | VARCHAR(20) | 外键（关联class.class_id）、非空 | 学生高一就读的行政班编号，留存历史记录 |
| create_time | DATETIME | 非空，默认当前时间戳 | 学生信息录入系统时间 |

## 7.  角色关联表（account_role）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| id | INT | 主键，自增 | 关联记录ID，唯一标识一条账号-角色关联记录 |
| account_id | VARCHAR(20) | 外键（关联account.person_account）、非空 | 系统账号，关联账号密码表 |
| role_id | VARCHAR(20) | 外键（关联role.role_id）、非空 | 角色编号，关联角色表 |
| - | - | 复合唯一键（account_id + role_id） | 防止同一账号重复分配同一角色，支持班主任与科任老师合法兼任 |

## 8.  选课记录表（student_course_choose）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| id | INT | 主键，自增 | 选课记录ID，唯一标识一条学生选科记录 |
| student_id | VARCHAR(20) | 外键（关联student.student_id）、非空 | 学号，关联学生表 |
| main_course | VARCHAR(100) | 非空，默认“语文,数学,英语” | 主科组合，固定为三门主科，无需修改 |
| one_choose_one | ENUM('物理', '历史') | 非空 | 物理/历史二选一的选课结果 |
| four_choose_two | VARCHAR(50) | 非空 | 政史地生四选二的选课结果（如“政治,地理”） |
| class_id | VARCHAR(20) | 外键（关联class.class_id）、可选 | 学生最终分配的高二选科班编号 |
| choose_status | ENUM('待确认', '已确认', '需调整') | 非空，默认“待确认” | 选课流程状态，标记是否需要重新选科 |
| choose_time | DATETIME | 非空，默认当前时间戳 | 学生提交选课志愿的时间 |
| - | - | 唯一键（student_id） | 确保一个学生仅对应一条高二选科记录 |

## 9.  考试信息表（exam）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| exam_id | VARCHAR(20) | 主键 | 考试编号，唯一标识一场考试 |
| exam_name | VARCHAR(100) | 非空 | 考试名称（如“2025-2026学年高二上学期月考”） |
| exam_time | DATETIME | 非空 | 考试举办时间 |
| is_city_rank | ENUM('是', '否') | 非空 | 是否包含单科市排名，仅市统考为“是” |
| remark | VARCHAR(200) | 可选 | 考试补充说明，如考试范围、组织单位等 |

## 10.  考试成绩表（exam_score）
| 属性名 | 数据类型 | 约束 | 说明 |
| ---- | ---- | ---- | ---- |
| id | INT | 主键，自增 | 成绩记录ID，唯一标识一条学生单科考试成绩 |
| exam_id | VARCHAR(20) | 外键（关联exam.exam_id）、非空 | 考试编号，关联考试信息表 |
| student_id | VARCHAR(20) | 外键（关联student.student_id）、非空 | 学号，关联学生表 |
| course_id | VARCHAR(20) | 外键（关联course.course_id）、非空 | 课程编号，关联课程表 |
| original_score | DECIMAL(5,1) | 非空 | 学生该科目的原始考试得分 |
| convert_score | DECIMAL(5,1) | 可选 | 赋分成绩，仅当考试为市统考且科目为政史地生时有值 |
| city_rank | INT | 可选 | 单科市排名，仅当考试为市统考时有值 |
| valid_exam_num | INT | 可选 | 该科目有效参考总人数，仅当考试为市统考时有值 |
| - | - | 复合唯一键（exam_id + student_id + course_id） | 确保一个学生一门课程一次考试仅有一条成绩记录 |
